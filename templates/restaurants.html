{% extends "_base.html" %}
{% from "_macros.html" import nav_bar, header, message_flashing %}
{% from "_macros_js.html" import google_maps_script %}

<!-- HEAD -->
{% block title %}
  <title>Restaurants</title>
{% endblock %}

{% block description %}
    <meta description="still i'll have to fill this up">
{% endblock%}


<!-- BODY -->
{% block content %}

  {{ nav_bar({"Info":"#restaurant-info", "Menu":"#menu", "Comments":"#comments"}) }}

  {{ header(main_page=False) }}

  {{ message_flashing() }}

    <!-- Restaurant info section -->
    <section class="bg-white">
      <div class="container item">
        <div class="row">
          <div class="col-lg-12 text-left">

            <h1 class="section-heading">Find a place for you</h1>
            <br>

            <form action="{{url_for('mainPage')}}" method = 'POST'>
              <div class="row">
                <div class="col-lg-3 header-form-grid ">
                  
                  <div class="dropdown">
                    <input type="" name="column" class="btn-block dropdown-toggle form-control" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    </input>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="#">Name</a>
                      <a class="dropdown-item" href="#">Another action</a>
                      <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                  </div>
                  <!-- <input class="btn-block btn-xl form-control" type='text' size='30' name='name' placeholder='aa'> -->
                
                </div>
                <div class="col-lg-6 header-form-grid ">
                  <input  class="btn-block form-control" type='text' size='30' name='input' placeholder='Type a Name or Cuisine...'>
                </div>
                <div class="col-lg-3 header-form-grid ">
                  <button class="btn btn-primary btn-block btn-text-black" id="search-btn">Search</button>
                </div>
                
              </div>
            </form>

          </div>
        </div>

      </div>
    </section>





    <!-- Menu Items section -->
    <section class="bg-light" id="restaurants">
      <div class="container">
        <div class="row" id="restaurant-results">
          
          <!-- RESULTS RECEIVED BY AJAX -->

        </div>
      </div>

    </section>





    <!-- Comments section -->
    <section class="bg-white" id="comments">

      <div class="container item">
        <div class="row">
          <div class="col-lg-12 text-left">
            <h3 class="section-heading">Comments:</h3>
          </div>
        </div>
      </div>



      <div class="container item" id="add-a-comment">
        <div class="row">
          <div class="col-lg-12 text-left">
            <hr>

            <br>
            <h5>Add a comment:</h5>
            <br>

            <form id="contactForm" action="{{url_for('restaurantMenu', restaurant_id=1)}}" method = 'POST'  novalidate="novalidate">
              <div class="form-group">
                <input name="user_name" class="form-control" id="user-name" type="text" placeholder="Your Name *" required="required" data-validation-required-message="Please enter your name.">
                <p class="help-block text-danger"></p>
              </div>
              <div class="form-group">
                <textarea name="message" class="form-control" id="message" placeholder="Your Message *" required="required" data-validation-required-message="Please enter a message."></textarea>
                <p class="help-block text-danger"></p>
              </div>
              <div class="form-group text-center">
                <button class="btn btn-xl btn-block btn-primary" type="submit">Send Message</button>
              </div>
            </form>
          </div>
        </div>
      </div>

    </section>

{% endblock %}

{% block scripts %}
  {{ google_maps_script() }}

<script type="text/javascript">
  $(document).ready(function() {
    $('#drop-name').on('click', function() {
      $('#user-column').val('Name');
    });
    $('#drop-lat-name').on('click', function() {
      $('#user-column').val('Latin Name');
    });

  });

  $(document).ready(function() {

    $(document).on('click', '#search-btn', function(event) {

      req=$.ajax({
        data : {
          column: $('input[name="column"]').val(),
          input: $('input[name="input"]').val()
        },
        type: 'POST',
        url: '/_search_results'

      });
      req.done(function(data) {
        $('#restaurant-results').html(data);
      })

      event.preventDefault();

  });

});
</script>


{% endblock%}